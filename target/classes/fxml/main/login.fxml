<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<ScrollPane xmlns="http://javafx.com/javafx/8" 
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.nutrisense.controllers.main.LoginController"
            stylesheets="@/css/login.css"
            fitToWidth="true" fitToHeight="true"
            hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
    
    <AnchorPane prefHeight="600" prefWidth="800">
        
        <!-- Background -->
        <Pane style="-fx-background-color: linear-gradient(to bottom right, #667eea, #764ba2);" 
              AnchorPane.topAnchor="0" AnchorPane.bottomAnchor="0" 
              AnchorPane.leftAnchor="0" AnchorPane.rightAnchor="0"/>
        
        <!-- Login Card -->
        <VBox styleClass="login-card" spacing="20" 
              AnchorPane.topAnchor="20" AnchorPane.bottomAnchor="20" 
              AnchorPane.leftAnchor="50" AnchorPane.rightAnchor="50">
            
            <!-- Header -->
            <VBox alignment="CENTER" spacing="10">
                <Label text="ðŸ”" styleClass="login-icon"/>
                <Label text="Login ke NutriSense" styleClass="login-title"/>
                <Label text="Masuk dengan akun Anda" styleClass="login-subtitle"/>
            </VBox>

            <!-- Login Form -->
            <VBox styleClass="form-container" spacing="15">
                <!-- Username Field -->
                <VBox spacing="5">
                    <Label text="Username" styleClass="input-label"/>
                    <TextField fx:id="usernameField" styleClass="text-field" 
                              promptText="Masukkan username"/>
                </VBox>

                <!-- Password Field -->
                <VBox spacing="5">
                    <Label text="Password" styleClass="input-label"/>
                    <PasswordField fx:id="passwordField" styleClass="text-field" 
                                  promptText="Masukkan password"/>
                </VBox>

                <!-- Error Message -->
                <Label fx:id="errorLabel" styleClass="error-label" visible="false" 
                       wrapText="true" maxWidth="300"/>

                <!-- Login Button -->
                <Button fx:id="loginButton" text="Login" styleClass="login-button" 
                        onAction="#handleLogin" defaultButton="true"/>

                <!-- Loading Indicator -->
                <VBox fx:id="loadingIndicator" styleClass="loading-indicator" 
                      alignment="CENTER" visible="false" spacing="10">
                    <ProgressIndicator progress="-1" prefWidth="30" prefHeight="30"/>
                    <Label text="Memproses login..." styleClass="loading-text"/>
                </VBox>
            </VBox>

            <!-- Divider -->
            <HBox alignment="CENTER" spacing="10" prefWidth="300">
                <Pane styleClass="divider-line" prefWidth="100" prefHeight="1"/>
                <Label text="ATAU" styleClass="divider-text"/>
                <Pane styleClass="divider-line" prefWidth="100" prefHeight="1"/>
            </HBox>

            <!-- Registration Options -->
            <VBox styleClass="register-options" spacing="10">
                <Label text="Belum punya akun? Daftar sebagai:" styleClass="register-label"/>
                
                <HBox spacing="10" alignment="CENTER">
                    <Button text="ðŸ‘¨â€ðŸŽ“ Siswa" styleClass="register-button" 
                            onAction="#handleRegisterAsSiswa"/>
                    <Button text="ðŸ‘¨â€ðŸ³ Dapur MBG" styleClass="register-button" 
                            onAction="#handleRegisterAsDapur"/>
                </HBox>
            </VBox>

            <!-- Back to Home -->
            <Button text="â† Kembali ke Home" styleClass="back-button" 
                    onAction="#handleBackToHome"/>
        </VBox>
        
    </AnchorPane>
</ScrollPane>